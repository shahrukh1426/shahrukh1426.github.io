import{a as f}from"./chunk-RAPWQHQA.js";import{a as n}from"./chunk-NI2JTGJR.js";import{I as l,P as s,V as c,Wa as o,_ as a,r}from"./chunk-OH6YQK27.js";var p=class e{constructor(t,i){this.firestore=t;this.storage=i;this.profileCollection=this.firestore.collection("profiles"),this.contactsCollection=this.firestore.collection("contacts"),this.socialsCollection=this.firestore.collection("socials"),this.getProfile(),this.getContacts(),this.getSocials()}profileCollection;contactsCollection;socialsCollection;initialProfileData={avatar:"",name:"",title:"",presentation:[],googleMap:""};profileData=o(this.initialProfileData);profile=this.profileData.asReadonly();contacts=o([]);socials=o([]);getProfile(){this.profileCollection.valueChanges({idField:"id"}).pipe(l(),r(t=>t[0]),s(t=>this.storage.ref(t.avatar).getDownloadURL().pipe(r(i=>(t.avatar=i,this.profileData.set(t),t))))).subscribe()}getContacts(){this.contactsCollection.valueChanges({idField:"id"}).subscribe(i=>this.contacts.set(i))}getSocials(){this.socialsCollection.valueChanges({idField:"id"}).subscribe(i=>this.socials.set(i))}static \u0275fac=function(i){return new(i||e)(a(n),a(f))};static \u0275prov=c({token:e,factory:e.\u0275fac})};export{p as a};
